# Приложение для опроса УВП-280

Приложение опрашивает приборы УВП-280 по `XMLio`
Должно быть добавлено в планировщик заданий системы на событие старта системы

Описание протокола в папке `manuals`

`.env` - в этом файле лежат настройки, на данный момент при старте приложения оттуда считывается номер порта. 
Если поменяете номер порта в этом файле (читается только на старте приложения), необходимо в скрипте в проекте WinCC также поменять номер порта. 
Возможно вынесу его во внутренний тег для изменения онлайн. 

config.json содержит конфигурацию устройств, доступных для опроса. При формирование запроса вида:
```http://{device IP address}:{port}/api/v0/archive/{device}/{pipe}?startTime={t1}&&endTime={t2}```
device - сюда указывается номер из файла конгфигурации, которому соотвествует endpoint
pipe - номер трубопровода
t1, t2 - время в формате yyyy-MM-ddThh:mm:ss.000

Пример описания устройства:
```
{
"device": 1,
"name": "СИКГ-ТГ",
"endpoint": "http://192.168.1.130:80/xmldata.asmx",
"comment": "Трубопровод 1 - СИКГ ТГ-1, Трубопровод 2 - СИКГ ТГ-2"
}
```

`/xmldata.asmx` - обязательная часть адреса, это endpoint для опроса внутри прибора УВП280, к которому необходимо отправить POST-запрос с body в виде xml-структуры
